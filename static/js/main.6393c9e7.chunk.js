(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{10:function(e,t,a){e.exports=a(17)},15:function(e,t,a){},17:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(8),i=a.n(s),o=(a(15),a(16),a(9)),u=a(1),l=a(2),c=a(4),h=a(3),d=a(5),m=a(7);var p=function(e){return n.a.createElement("button",{className:m({square:!0,valid:e.id===e.currBoard||-1===e.currBoard,"winner-x":"X"===e.winners[e.id],"winner-o":"O"===e.winners[e.id]}),onClick:e.onClick},e.value)},f=function(e){function t(){return Object(u.a)(this,t),Object(c.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"renderSquare",value:function(e){var t=this;return n.a.createElement(p,{id:this.props.id,currBoard:this.props.currentBoard,value:this.props.value[e],onClick:function(){return t.props.onClick(e)},winners:this.props.winners})}},{key:"render",value:function(){return n.a.createElement("div",{className:"board"},n.a.createElement("div",{className:"board-row"},this.renderSquare(0),this.renderSquare(1),this.renderSquare(2)),n.a.createElement("div",{className:"board-row"},this.renderSquare(3),this.renderSquare(4),this.renderSquare(5)),n.a.createElement("div",{className:"board-row"},this.renderSquare(6),this.renderSquare(7),this.renderSquare(8)))}}]),t}(n.a.Component),v=a(7),N=function(e){function t(){return Object(u.a)(this,t),Object(c.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"renderBoard",value:function(e){var t=this;return n.a.createElement(f,{value:this.props.boards[e],onClick:function(a){return t.props.onClick(e,a)},currentBoard:this.props.currentBoard,id:e,winners:this.props.winners,className:v({"winner-x":!0})})}},{key:"render",value:function(){return n.a.createElement("div",{className:"super-board"},n.a.createElement("div",{className:"super-board-row"},this.renderBoard(0),this.renderBoard(3),this.renderBoard(6)),n.a.createElement("div",{className:"super-board-row"},this.renderBoard(1),this.renderBoard(4),this.renderBoard(7)),n.a.createElement("div",{className:"super-board-row"},this.renderBoard(2),this.renderBoard(5),this.renderBoard(8)))}}]),t}(n.a.Component),S=function(e){function t(){return Object(u.a)(this,t),Object(c.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"renderSimOptions",value:function(){var e=this;if("simulate"===this.props.selectedState)return n.a.createElement("div",{className:"text-left"},n.a.createElement("h3",null,"Sim Options"),n.a.createElement("div",{className:"radio"},n.a.createElement("label",null,n.a.createElement("input",{type:"radio",name:"options",value:"1",checked:1===this.props.simulationMode,onChange:function(t){return e.props.onOptionChange(t)}})," Random v Random")),n.a.createElement("div",{className:"radio"},n.a.createElement("label",null,n.a.createElement("input",{type:"radio",name:"options",value:"2",checked:2===this.props.simulationMode,onChange:function(t){return e.props.onOptionChange(t)}})," Smart v Random")))}},{key:"renderPauseButton",value:function(){var e;return e=this.props.paused?"Unpause":"Pause",n.a.createElement("div",{className:"text-center"},n.a.createElement("button",{className:"btn btn-danger font-weight-bold text-dark m-2",onClick:this.props.onPause},e))}},{key:"renderStats",value:function(){var e=this.props.numSims-this.props.numWinsX-this.props.numWinsO;if(this.props.numSims>0||"simulate"===this.props.selectedState)return n.a.createElement("div",{className:"text-center"},n.a.createElement("p",{className:"text-left"},"Number of Simulations: "+this.props.numSims),n.a.createElement("p",{className:"text-left"},"Number of X Wins: "+this.props.numWinsX),n.a.createElement("p",{className:"text-left"}," X Winrate: "+this.props.numWinsX/this.props.numSims*100+"%"),n.a.createElement("p",{className:"text-left"}," Number of O wins: "+this.props.numWinsO),n.a.createElement("p",{className:"text-left"}," O Winrate: "+this.props.numWinsO/this.props.numSims*100+"%"),n.a.createElement("p",{className:"text-left"}," Number of Ties: "+e),n.a.createElement("p",{className:"text-left"}," Tie Rate: "+e/this.props.numSims*100+"%"),n.a.createElement("button",{className:"btn btn-danger font-weight-bold text-dark m-2",onClick:this.props.onStatReset},"Reset Statistics"))}},{key:"renderGameOptions",value:function(){var e=this;return n.a.createElement("div",{className:"sidebar-sticky text-left"},n.a.createElement("h2",null,"Game Options"),n.a.createElement("div",{className:"radio"},n.a.createElement("label",null,n.a.createElement("input",{type:"radio",name:"values",value:"randomAI",checked:"randomAI"===this.props.selectedState,onChange:function(t){return e.props.onChange(t)}})," Random A.I.")),n.a.createElement("div",null,n.a.createElement("label",{className:"radio"},n.a.createElement("input",{type:"radio",name:"values",value:"smartAI",checked:"smartAI"===this.props.selectedState,onChange:function(t){return e.props.onChange(t)}})," Smart A.I.")),n.a.createElement("div",null,n.a.createElement("label",{className:"radio"},n.a.createElement("input",{type:"radio",name:"values",value:"players",checked:"players"===this.props.selectedState,onChange:function(t){return e.props.onChange(t)}})," Player v Player")),n.a.createElement("div",null,n.a.createElement("label",{className:"radio"},n.a.createElement("input",{type:"radio",name:"values",value:"simulate",checked:"simulate"===this.props.selectedState,onChange:function(t){return e.props.onChange(t)}})," "," Simulate")))}},{key:"render",value:function(){return n.a.createElement("nav",{className:"float-left text-center ml-5"},n.a.createElement("div",null,n.a.createElement("button",{className:"btn btn-danger font-weight-bold text-dark m-2",onClick:this.props.onReset},"RESET"),this.renderGameOptions(),this.renderSimOptions(),this.renderPauseButton(),this.renderStats()))}}]),t}(n.a.Component),b=function(e){function t(){return Object(u.a)(this,t),Object(c.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"renderStatus",value:function(){var e,t=this.props.winner;return e=t?"The winner is "+t+"!":-2===this.props.currentBoard?"The game was a tie":"Current Player: "+(this.props.xIsNext?"X":"O"),n.a.createElement("h1",{className:"status text-center"},e)}},{key:"render",value:function(){return n.a.createElement("div",null,this.renderStatus())}}]),t}(n.a.Component),y=function(){function e(t){Object(u.a)(this,e),this.state=JSON.parse(JSON.stringify(t))}return Object(l.a)(e,[{key:"makeMove",value:function(e){var t=e[0],a=e[1],r=this.state.boards.slice(),n=this.state.winners.slice(),s=this.state.currentBoard;if(!x(n)&&(s===t||-1===s)){if(r[t][a])return;r[t][a]=this.state.xIsNext?"X":"O";for(var i=0;i<9;i++)n[i]||(n[i]=x(r[i]));this.isBoardFull(a)&&(a=-1),this.state.boards=r,this.state.winners=n,this.state.xIsNext=!this.state.xIsNext,this.state.currentBoard=a}}},{key:"isBoardFull",value:function(e){for(var t=this.state.boards[e],a=0;a<9;a++)if(!t[a])return!1;return!0}},{key:"isAllFull",value:function(){for(var e=0;e<9;e++)if(!this.isBoardFull(e))return!1;return!0}},{key:"getValidMoves",value:function(){var e=this.state.boards,t=this.state.currentBoard,a=[];if(this.state.winner)return[];if(-1===t)for(var r=0;r<9;r++)for(var n=0;n<9;n++)e[r][n]||a.push([r,n]);else{if(-2===t)return[];for(var s=0;s<9;s++)e[t][s]||a.push([t,s])}return a}},{key:"updateWinner",value:function(){var e=x(this.state.winners);e&&-2!==this.state.currentBoard&&(this.state.winner=e,this.state.currentBoard=-2),this.isAllFull()&&-2!==this.state.currentBoard&&(this.state.currentBoard=-2)}},{key:"isPlayer",value:function(e){return!("X"!==e||!this.state.xIsNext)||"O"===e&&!this.state.xIsNext}}]),e}(),k=function(){function e(){Object(u.a)(this,e),this.nodes={},this.currNode=null}return Object(l.a)(e,[{key:"initialize",value:function(e){if(null===this.nodes[JSON.stringify(e.state)]||void 0===this.nodes[JSON.stringify(e.state)]){var t=new O(null,new y(e.state),0);this.currNode=t,this.nodes[JSON.stringify(e.state)]=t}else this.currNode=this.nodes[JSON.stringify(e.state)]}},{key:"runSearch",value:function(e){this.initialize(e);for(var t=(new Date).getTime()+1e3,a=0;(new Date).getTime()<t;){this.select(e),this.expand();var r=this.simulate();this.backPropogate(r),a++}console.log("Number of sims ran: ",a)}},{key:"getBestMove",value:function(e){var t,a=-1/0;for(var r in this.currNode=this.nodes[JSON.stringify(e.state)],this.currNode.children){var n=this.currNode.children[r],s=n.numWins/n.numSims;s>a&&(a=s,t=n.move)}if(void 0===t){var i=e.getValidMoves();t=i[Math.floor(Math.random()*i.length)]}return t}},{key:"select",value:function(e){for(this.currNode=this.nodes[JSON.stringify(e.state)];!this.currNode.isLeafNode()&&this.currNode.isFullyExpanded();){var t=void 0,a=-1/0;for(var r in this.currNode.children){var n=this.currNode.children[r];n.getUCB1()>a&&(a=n.getUCB1(),t=n)}this.currNode=t}}},{key:"expand",value:function(){var e=this.currNode.state.getValidMoves();if(0!==e.length){var t,a=!1;do{for(var r in a=!1,t=e[Math.floor(Math.random()*e.length)],this.currNode.children){this.currNode.children[r].move===t&&(a=!0)}}while(a);var n=new y(this.currNode.state.state);n.makeMove(t);var s=new O(this.currNode,n,t);this.currNode.children[JSON.stringify(n.state)]=s,this.nodes[JSON.stringify(n.state)]=s,this.currNode=s}}},{key:"simulate",value:function(){for(var e=new y(this.currNode.state.state),t=e.state.winner;-2!==e.currentBoard;){var a=e.getValidMoves();if(0===a.length)break;var r=a[Math.floor(Math.random()*a.length)];e.makeMove(r),e.updateWinner(),t=e.state.winner}return t}},{key:"backPropogate",value:function(e){for(;null!==this.currNode&&void 0!==this.currNode;)this.currNode.numSims++,""===e?this.currNode.numWins+=.5:this.currNode.state.isPlayer(e)||this.currNode.numWins++,this.currNode=this.currNode.parent}}]),e}(),O=function(){function e(t,a,r){Object(u.a)(this,e),this.parent=t,this.state=a,this.move=r,this.children={},this.numWins=0,this.numSims=0}return Object(l.a)(e,[{key:"isLeafNode",value:function(){return 0===Object.keys(this.children).length}},{key:"isFullyExpanded",value:function(){return Object.keys(this.children).length===this.state.getValidMoves().length}},{key:"getUCB1",value:function(){return this.numWins/this.numSims+Math.sqrt(2*Math.log(this.parent.numSims/this.numSims))}}]),e}(),g=function(e){function t(){var e;Object(u.a)(this,t),(e=Object(c.a)(this,Object(h.a)(t).call(this))).handleClick=function(t,a){("players"===e.state.selectedState||e.state.xIsNext)&&e.makeMove(t,a)},e.handleChange=function(t){e.setState({selectedState:t.target.value})},e.handleOptionChange=function(t){e.setState({simulationMode:parseInt(t.target.value)})},e.handleReset=function(){e.initializeState()},e.handleStatReset=function(){console.log("resetting simulations"),e.setState({numSims:0,numWinsX:0,numWinsO:0})},e.handlePause=function(){e.setState({paused:!e.state.paused})},e.MCSearch=new k;for(var a=Array(9).fill(null),r=0;r<9;r++)a[r]=Array(9).fill(null);return e.state={boards:a,winners:Array(9).fill(null),xIsNext:!0,currentBoard:-1,winner:null,selectedState:"randomAI",simulationMode:1,paused:!1,numSims:0,numWinsX:0,numWinsO:0},e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"initializeState",value:function(){for(var e=Array(9).fill(null),t=0;t<9;t++)e[t]=Array(9).fill(null);this.setState({boards:e,winners:Array(9).fill(null),xIsNext:!0,currentBoard:-1,winner:null,paused:!1}),this.MCSearch=new k}},{key:"randomPlay",value:function(){var e=this.state.selectedState;if(!this.state.winner&&"players"!==e&&"smartAI"!==e){var t=this.getValidMoves();if(0!==t.length){var a=t[Math.floor(Math.random()*t.length)];("randomAI"!==e||this.state.xIsNext)&&("simulate"!==e||1!==this.state.simulationMode&&this.state.xIsNext)||this.makeMove(a[0],a[1])}}}},{key:"smartPlay",value:function(){var e=this.state.selectedState;if(!this.state.winner&&"players"!==e&&"randomAI"!==e&&!this.state.paused&&(this.state.xIsNext&&"simulate"===e&&2===this.state.simulationMode||"smartAI"===e&&!this.xIsNext)){var t=new y(this.state);this.MCSearch.runSearch(t);var a=this.MCSearch.getBestMove(t);this.makeMove(a[0],a[1])}}},{key:"makeMove",value:function(e,t){var a=this.state.boards.slice(),r=this.state.winners.slice(),n=this.state.currentBoard;if(!x(r)&&-2!==this.currentBoard&&(n===e||-1===n)){if(a[e][t])return;a[e][t]=this.state.xIsNext?"X":"O";for(var s=0;s<9;s++)r[s]||(r[s]=x(a[s]));this.isBoardFull(t)&&(t=-1),this.setState({boards:a,winners:r,xIsNext:!this.state.xIsNext,currentBoard:t})}}},{key:"isBoardFull",value:function(e){for(var t=this.state.boards[e],a=0;a<9;a++)if(!t[a])return!1;return!0}},{key:"isAllFull",value:function(){for(var e=0;e<9;e++)if(!this.isBoardFull(e))return!1;return!0}},{key:"getValidMoves",value:function(){var e=this.state.boards,t=this.state.currentBoard,a=[];if(!this.state.winner){if(-1===t)for(var r=0;r<9;r++)for(var n=0;n<9;n++)e[r][n]||a.push([r,n]);else{if(-2===t)return[];for(var s=0;s<9;s++)e[t][s]||a.push([t,s])}return a}}},{key:"updateWinner",value:function(){var e=x(this.state.winners);if(e&&-2!==this.state.currentBoard&&this.setState({winner:e,currentBoard:-2}),this.isAllFull()&&-2!==this.state.currentBoard&&this.setState({currentBoard:-2}),-2!==this.state.currentBoard){for(var t=0;t<9;t++)if(!this.state.winners[t]&&!this.isBoardFull(t))return;this.setState({currentBoard:-2})}"simulate"===this.state.selectedState&&("X"===e?this.setState({numWinsX:this.state.numWinsX+1}):"O"===e&&this.setState({numWinsO:this.state.numWinsO+1})),this.setState({numSims:this.state.numSims+1}),this.initializeState()}},{key:"componentDidUpdate",value:function(){this.updateWinner()}},{key:"componentDidMount",value:function(){var e=this;setInterval((function(){e.state.paused||(e.smartPlay(),e.randomPlay())}),1)}},{key:"render",value:function(){return n.a.createElement("div",{className:"app"},n.a.createElement(b,{winner:this.state.winner,xIsNext:this.state.xIsNext,currentBoard:this.state.currentBoard}),n.a.createElement(S,{selectedState:this.state.selectedState,onChange:this.handleChange,onOptionChange:this.handleOptionChange,onReset:this.handleReset,onPause:this.handlePause,onStatReset:this.handleStatReset,simulationMode:this.state.simulationMode,paused:this.state.paused,numSims:this.state.numSims,numWinsX:this.state.numWinsX,numWinsO:this.state.numWinsO}),n.a.createElement("div",{className:"game"},n.a.createElement(N,{onClick:this.handleClick,boards:this.state.boards,winners:this.state.winners,xIsNext:this.state.xIsNext,currentBoard:this.state.currentBoard,winner:this.state.winner})))}}]),t}(n.a.Component);function x(e){for(var t=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],a=0;a<t.length;a++){var r=Object(o.a)(t[a],3),n=r[0],s=r[1],i=r[2];if(e[n]&&e[n]===e[s]&&e[n]===e[i])return e[n]}return null}i.a.render(n.a.createElement(g,null),document.getElementById("root"))}},[[10,1,2]]]);
//# sourceMappingURL=main.6393c9e7.chunk.js.map